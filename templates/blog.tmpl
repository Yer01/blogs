{{/* templates/blog.tmpl - single post view; expects .Blog */}}
{{define "content"}}
<article class="single-post">
  <header class="post-header">
    <h1>{{.Blog.Name}}</h1>
    <div class="meta muted">
      <span>Created: <time datetime="{{.Blog.Created.Format "2006-01-02T15:04:05Z07:00"}}">{{.Blog.Created.Format "Jan 02, 2006 15:04"}}</time></span>
      {{if ne (.Blog.Created.Format "2006-01-02 15:04") (.Blog.Updated.Format "2006-01-02 15:04")}}
        • <span>Updated: <time datetime="{{.Blog.Updated.Format "2006-01-02T15:04:05Z07:00"}}">{{.Blog.Updated.Format "Jan 02, 2006 15:04"}}</time></span>
      {{end}}
    </div>
  </header>

  <div class="post-body">
    <p>{{.Blog.Content}}</p>
  </div>

  <div class="post-actions">
    <a class="btn" href="/blogs">← Back to all posts</a>
    <a class="btn secondary" href="/">Home</a>
    <a class="btn warning" href="/blogs/{{.Blog.ID}}/edit">Edit Post</a>
    <button class="btn danger" onclick="deletePost({{.Blog.ID}})">Delete Post</button>
  </div>
</article>

<script>

function deletePost(id) {
  if (!confirm('Are you sure you want to delete this post?')) return;
  
  fetch(`/blogs/${id}`, {
    method: 'DELETE'
  })
  .then(response => {
    if (response.ok) {
      alert('Post deleted successfully!');
      window.location.href = '/blogs';
    } else {
      alert('Failed to delete post');
    }
  })
  .catch(err => alert('Error: ' + err));
}
</script>

<style>
.post-actions {
  margin-top: 2rem;
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.btn.warning {
  background-color: #ff9800;
  color: white;
}

.btn.warning:hover {
  background-color: #e68900;
}

.btn.danger {
  background-color: #f44336;
  color: white;
}

.btn.danger:hover {
  background-color: #da190b;
}
</style>
{{end}}
